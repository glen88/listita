<ion-header>
    <ion-toolbar color="light">
        <ion-buttons slot="start" >
        <ion-back-button color="primary" defaultHref="/">
            </ion-back-button>
        </ion-buttons>
        <ion-title color="primary" >
            <ion-icon name="home"></ion-icon>
            {{service.obtenerTienda(categoria.tiendaId) | getNombre}}
        </ion-title>
        <!-- <ion-title color="primary">{{categoria.nombre}}</ion-title> -->
    </ion-toolbar>
</ion-header>

<ion-content>
    <ion-list-header >
        <ion-label color="primary"> 
            <h2>
                <ion-icon name="bookmark"></ion-icon>
                {{categoria.nombre}}
            </h2>
            </ion-label>
    </ion-list-header>
    <ion-searchbar #q animated ></ion-searchbar>
    <ion-item *ngIf="categoria.productos.length <= 0" color="medium">
        <ion-label class="ion-text-center">
            <ion-icon slot="icon-only" name="information-circle-outline"></ion-icon>
            <h1>Sin productos</h1>
            <p>Agregue productos para esta caregor√≠a</p>
        </ion-label>
    </ion-item>
    <ion-list>
        <ion-item-sliding *ngFor="let p of categoria.productos | buscaProductos:q.value | ordenAZ">
            <ion-item>
                <ion-label>
                    <h3>{{p.nombre | slice:0:18}}</h3>
                </ion-label>
                <ion-toggle color="secondary" slot="start" [(ngModel)]="p.seleccionado" (click)="service.resetCantidad(p)"></ion-toggle>
                
                <ion-input #i  *ngIf="p.seleccionado" class="ion-text-right" [(ngModel)]="p.cantidad" placeholder="cantidad" type="number"></ion-input>
                <ion-select class="btn" *ngIf="p.seleccionado" placeholder="Um" [(ngModel)]="p.um" slot="end">
                <ion-select-option value="pz">Pz</ion-select-option>
                <ion-select-option value="kg">Kg</ion-select-option>
                <ion-select-option value="pq">Pq</ion-select-option>
            </ion-select>
            
            
            </ion-item>
            <ion-item-options side="start">
                <ion-item-option (click)="editarNombreProducto(p)">
                    <ion-icon slot="icon-only" name="create"></ion-icon>
                </ion-item-option>
            </ion-item-options>
            <ion-item-options side="end">
                <ion-item-option color="danger" (click)="borrarProducto(p.id)">
                    <ion-icon slot="icon-only" name="close-outline"></ion-icon>
                </ion-item-option>
            </ion-item-options>
        </ion-item-sliding>
    </ion-list>
    <ion-fab vertical="bottom" horizontal="end" slot="fixed">
        <ion-fab-button size="small" color="success" (click)="agregarProductos()">
            <ion-icon name="add"></ion-icon>
        </ion-fab-button>
    </ion-fab>

</ion-content>